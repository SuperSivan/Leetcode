
[647. 回文子串](https://leetcode-cn.com/problems/palindromic-substrings/description/)



# 我的解法：暴力遍历数组
- 挺慢的
```C++
class Solution {
public:
    bool checkPalindromic(string s,int left,int right)
    {
        while(left<right)
        {
            if(s[left]!=s[right]) return false;
            left++;
            right--;
        }
        return true;
    }
    int countSubstrings(string s) {
        if(s.size()<2) return s.size();
        int ans=0;
       for(int i=0;i<s.size();i++)
       {
           //ans++;
           for(int right=s.size()-1;right>=i;right--)
           {
               //在区间内为回文数
               if( s[i]==s[right]&&checkPalindromic(s,i,right)) ans++;
           }
       }
       return ans;

    }
};
```

# 解法一：中心拓展

- 这是一个比较巧妙的方法，实质的思路和动态规划的思路类似。
- 比如对一个字符串 ababa，选择最中间的 a 作为中心点，往两边扩散，第一次扩散发现 left 指向的是 b，right 指向的也是 b，所以是回文串，继续扩散，同理 ababa 也是回文串。
- 这个是确定了一个中心点后的寻找的路径，然后我们只要寻找到所有的中心点，问题就解决了。
1. 中心点一共有多少个呢？看起来像是和字符串长度相等，但你会发现，如果是这样，上面的例子永远也搜不到 abab，想象一下单个字符的哪个中心点扩展可以得到这个子串？似乎不可能。所以中心点不能只有单个字符构成，还要包括两个字符，比如上面这个子串 abab，就可以有中心点 ba 扩展一次得到，所以最终的中心点由 2 * len - 1 个，分别是 len 个单字符和 len - 1 个双字符。

2. 为什么有 2 * len - 1 个中心点？
aba 有5个中心点，分别是 a、b、c、ab、ba
abba 有7个中心点，分别是 a、b、b、a、ab、bb、ba
3. 什么是中心点？
中心点即 left 指针和 right 指针初始化指向的地方，可能是一个也可能是两个
4. 为什么不可能是三个或者更多？
因为 3 个可以由 1 个扩展一次得到，4 个可以由两个扩展一次得到


```c++
class Solution {
public:
    int countSubstrings(string s) {
        int n = s.size(), ans = 0;
        for (int i = 0; i < 2 * n - 1; ++i) 
        {  
            // left和right指针和中心点的关系是？
            // 首先是left，有一个很明显的2倍关系的存在，其次是right，可能和left指向同一个（偶数时），也可能往后移动一个（奇数）
            // 大致的关系出来了，可以选择带两个特殊例子进去看看是否满足。
            int l = i / 2, r = i / 2 + i % 2;
            while (l >= 0 && r < n && s[l] == s[r]) {
                --l;
                ++r;
                ++ans;
            }
        }
        return ans;
    }
};



```

# 解法二：动态规划